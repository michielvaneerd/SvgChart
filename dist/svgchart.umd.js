!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.svgChart=i():t.svgChart=i()}(this,(()=>(()=>{"use strict";var t={d:(i,e)=>{for(var s in e)t.o(e,s)&&!t.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{SvgChart:()=>xt});const e="http://www.w3.org/2000/svg",s=/[A-Z]/g,n="svg-chart-";function a(t,i={},n=null){var a=document.createElementNS(e,t);return Object.keys(i).forEach((t=>{null!==i[t]&&("className"===t?i[t]&&a.classList.add(...i[t].trim().split(" ")):a.setAttribute(t.replace(s,"-$&").toLowerCase(),i[t]))})),n&&a.appendChild(n),a}function o(t,i){for(var e=t;e&&e.nodeName.toLowerCase()!==i.toLowerCase();)e=e.parentNode;return e}function r(t){return n+t}function h(t,i,e,s){if(e){const e=i.length;for(let n=0;n<e;n++)s.call(t,i[n],n,i)}else{const e=i.length-1;for(let n=e;n>=0;n--)s.call(t,i[n],e-n,i)}}function l(t,i,e,s){var n=(s-90)*Math.PI/180;return{x:t+e*Math.cos(n),y:i+e*Math.sin(n)}}const d={dutchFieldColorPalette:["#e60049","#0bb4ff","#50e991","#e6d800","#9b19f5","#ffa300","#dc0ab4","#b3d4ff","#00bfa0"],retroMetroColorPalette:["#ea5545","#f46a9b","#ef9b20","#edbf33","#ede15b","#bdcf32","#87bc45","#27aeef","#b33dc6"],riverNightsColorPalette:["#b30000","#7c1158","#4421af","#1a53ff","#0d88e6","#00b7c7","#5ad45a","#8be04e","#ebdc78"],springPastelsColorPalette:["#fd7f6f","#7eb0d5","#b2e061","#bd7ebe","#ffb55a","#ffee65","#beb9db","#fdcce5","#8bd3c7"]};class c{constructor(t){if(new.target===c)throw new Error("Controller class cannot be directly instanstiated.");this.svgChart=t,this.config=this.svgChart.config}onDraw(t){this.onDrawStart(t),this.config.series.forEach(((i,e)=>{const s=a("g",{dataSerie:i.id,className:this.svgChart.unselectedSeries[i.id]?r("unselected"):""});this.onDrawSerie(i,e,s),t.appendChild(s)})),this.onDrawEnd(t)}onDrawStart(t){}onDrawEnd(t){}onDrawSerie(t,i,e){}onConfigBefore(){}onConfigAfter(){}onConfigSerieBefore(t){}onConfigSerieAfter(t){}}var g,f;c.requiredConfigWithValue={},function(t){t[t.Line=0]="Line",t[t.Bar=1]="Bar",t[t.LineAndBar=2]="LineAndBar",t[t.Pie=3]="Pie",t[t.Donut=4]="Donut"}(g||(g={})),function(t){t[t.Top=0]="Top",t[t.End=1]="End",t[t.Bottom=2]="Bottom",t[t.Start=3]="Start",t[t.Left=4]="Left",t[t.Right=5]="Right",t[t.Center=6]="Center"}(f||(f={}));class u{constructor(){this.ltr=!0,this.series=null,this.title=null,this.chartType=null,this.onXAxisLabelGroupSelect=null,this.padding={start:40,end:20,top:100,bottom:40,left:40,right:20},this.paddingDefault=20,this.legendWidth=10,this.focusedValueShow=!0,this.focusedValueFill="black",this.focusedValueColor="white",this.focusedValuePadding=6,this.drawOnConfig=null,this.drawOnData=null,this.transition=!0,this.backgroundColor="white",this.fontFamily="sans-serif",this.titleFontSize="normal",this.titleColor="black",this.titleHorizontalPosition=f.Center,this.titleVerticalPosition=f.Top,this.maxValue=null,this.minValue=null,this.axisTitleFontSize="smaller",this.axisLabelFontSize="small",this.xAxisTitle=null,this.xAxisTitleBottom=null,this.xAxisGridLineWidth=1,this.xAxisGridLineColor="#C0C0C0",this.xAxisGridLineDashArray="1 1",this.xAxisLabelColor="#A0A0A0",this.xAxisTitleColor="#A0A0A0",this.xAxisGrid=!0,this.xAxisGridPadding=0,this.xAxisLabels=!0,this.xAxisGridColumns=!1,this.xAxisGridColumnsSelectable=!1,this.xAxisGridSelectedColumnOpacity=.2,this.xAxisGridColumnsSelectableColor="black",this.textAnchorXAxisLabels="middle",this.xAxisLabelTop=10,this.xAxisLabelRotation=0,this.xAxisStep=1,this.xAxisLabelStep=1,this.yAxisTitle=null,this.yAxisTitleStart=null,this.yAxisGridLineWidth=1,this.yAxisGridLineColor="#C0C0C0",this.yAxisGridLineDashArray="1 1",this.yAxisLabelColor="#A0A0A0",this.yAxisTitleColor="#A0A0A0",this.yAxisStep=10,this.yAxisLabelStep=10,this.yAxisGrid=!0,this.yAxisLabels=!0,this.yAxisGridPadding=0,this.legendFontSize="smaller",this.legendColor="black",this.legendCircle=!1,this.legend=!0,this.legendSelect=!0,this.legendPosition=f.Top,this.legendBottom=null,this.legendTop=null,this.lineWidth=2,this.pointRadius=2,this.connectNullValues=!1,this.lineCurved=!0,this.lineChartFilled=!1,this.points=!0,this.barFillOpacity=.5,this.barSpacing=4,this.barStrokeWidth=1,this.barStacked=!1,this.pieFillOpacity=.6,this.donutWidth=null,this.pieStroke="white",this.pieStrokeWidth=2,this.donutStroke="white",this.donutStrokeWidth=2}static getDirection(t){return t.ltr?"ltr":"rtl"}}var p,x,m,C,v,b,A,w=function(t,i,e,s){if("a"===e&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},y=function(t,i,e,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e};class S{constructor(t){p.add(this),x.set(this,void 0),m.set(this,void 0),this.svgChart=t,this.config=t.config}addYAxisGridAndLabels(){var t=a("g",{className:r("y-axis-group")});const i=Math.abs(this.config.minValue);for(var e=this.config.minValue,s=this.config.minValue;e<=this.config.maxValue||s<=this.config.maxValue;){if(this.config.yAxisGrid&&e<=this.config.maxValue){let s=this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight-(e+i)*this.svgChart.lineAndBarValueHeight;t.appendChild(a("line",{x1:this.config.padding.left,y1:s,x2:this.config.padding.left+this.svgChart.chartWidth+2*this.config.xAxisGridPadding,y2:s,className:r("y-axis-grid-line"),stroke:this.config.yAxisGridLineColor||"",strokeWidth:this.config.yAxisGridLineWidth||"",strokeDasharray:this.config.yAxisGridLineDashArray||""}))}if(e+=this.config.yAxisStep,this.config.yAxisLabels&&s<=this.config.maxValue){let e=this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight-(s+i)*this.svgChart.lineAndBarValueHeight;t.appendChild(a("text",{direction:u.getDirection(this.config),x:this.config.ltr?this.config.padding.left-10:this.config.padding.left+this.svgChart.chartWidth+10,y:e,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.config.fontFamily||"",fontSize:this.config.axisLabelFontSize||"",className:r("y-axis-label"),fill:this.config.yAxisLabelColor||""},document.createTextNode(s.toString())))}s+=this.config.yAxisLabelStep}this.svgChart.svg.appendChild(t)}addXAxisGridAndLabels(t){var i=a("g"),e=a("g",{className:r("x-axis-label-group-current")}),s=this.config.xAxisGridColumnsSelectable?a("g"):null;h(this,this.svgChart.data.xAxis.columns,this.config.ltr,((n,o)=>{if(this.config.xAxisGrid){const e=this.config.padding.left+this.config.xAxisGridPadding+o*t;0!==o&&(o+0)%this.config.xAxisStep!=0||w(this,p,"m",C).call(this,i,e),this.config.xAxisGridColumnsSelectable&&s.appendChild(a("rect",{x:e,y:this.config.padding.top+this.config.yAxisGridPadding,width:t,height:this.svgChart.chartHeight,className:r("x-axis-grid-column-selectable"),fillOpacity:0,fill:this.config.xAxisGridColumnsSelectableColor}))}if(this.config.xAxisLabels&&(o+0)%this.config.xAxisLabelStep==0){var h=a("g",{transform:`translate(${this.config.padding.left+this.config.xAxisGridPadding+o*t+(this.config.xAxisGridColumns?t/2:0)} ${this.svgChart.chartHeight+this.config.padding.top+2*this.config.yAxisGridPadding+this.config.xAxisLabelTop})`});h.appendChild(a("text",{direction:u.getDirection(this.config),textAnchor:this.config.textAnchorXAxisLabels||"middle",dominantBaseline:"hanging",fontFamily:this.config.fontFamily||"",fontSize:this.config.axisLabelFontSize||"",fontWeight:"normal",fill:this.config.xAxisLabelColor||"",tabindex:this.config.xAxisGridColumnsSelectable?0:null,className:r("x-axis-label")+" "+(this.config.xAxisGridColumnsSelectable?r("x-axis-grid-column-selectable-label"):""),transform:`rotate(${this.config.xAxisLabelRotation})`},document.createTextNode(n.toString()))),e.appendChild(h)}})),this.config.xAxisGrid&&this.config.xAxisGridColumns&&w(this,p,"m",C).call(this,i,this.config.padding.left+this.config.xAxisGridPadding+this.svgChart.data.xAxis.columns.length*t),this.svgChart.xAxisGroupElement.appendChild(i),this.config.xAxisGridColumnsSelectable&&this.svgChart.xAxisGridColumnsSelectableGroupElement.appendChild(s),this.svgChart.xAxisLabelsGroupElement.appendChild(e)}addXAxisTitle(){var t=this.config.ltr?this.svgChart.width-this.config.padding.right-this.config.xAxisGridPadding:this.config.padding.left;this.svgChart.svg.appendChild(a("text",{direction:u.getDirection(this.config),x:t,y:this.svgChart.height-(null!==this.config.xAxisTitleBottom?this.config.xAxisTitleBottom:this.config.paddingDefault),textAnchor:"end",dominantBaseline:"auto",fontFamily:this.config.fontFamily||"",fontSize:this.config.axisTitleFontSize||"",fill:this.config.xAxisTitleColor||"",className:r("text-x-axis-title")},document.createTextNode(this.config.xAxisTitle)))}addYAxisTitle(){var t,i=a("g");t=this.config.ltr?this.config.yAxisTitleStart?this.config.yAxisTitleStart:this.config.paddingDefault:this.config.yAxisTitleStart?this.svgChart.width-this.config.yAxisTitleStart:this.svgChart.width-this.config.paddingDefault,i.setAttribute("transform","translate("+t+", "+(this.config.padding.top+this.config.yAxisGridPadding)+")");var e=a("text",{direction:u.getDirection(this.config),textAnchor:"end",dominantBaseline:"hanging",fontFamily:this.config.fontFamily||"",fontSize:this.config.axisTitleFontSize||"",fill:this.config.yAxisTitleColor||"",className:r("text-y-axis-title")},document.createTextNode(this.config.yAxisTitle));e.setAttribute("transform",this.config.ltr?"rotate(-90)":"rotate(90)"),i.appendChild(e),this.svgChart.svg.appendChild(i)}addXAxisLabelsGroup(){this.svgChart.xAxisLabelsGroupElement=a("g",{className:r("x-axis-label-group")}),this.config.xAxisGridColumnsSelectable&&(w(this,x,"f")||(y(this,x,w(this,p,"m",v).bind(this),"f"),y(this,m,w(this,p,"m",A).bind(this),"f")),this.svgChart.addEventListener(this.svgChart.xAxisLabelsGroupElement,"click",w(this,x,"f"),!1),this.svgChart.addEventListener(this.svgChart.xAxisLabelsGroupElement,"keydown",w(this,m,"f"),!1),this.svgChart.xAxisGridColumnsSelectableGroupElement=this.svgChart.svg.appendChild(a("g",{className:r("x-axis-columns-selectable-group")}))),this.svgChart.svg.appendChild(this.svgChart.xAxisLabelsGroupElement)}}function G(t,i,e){t.xAxisGroupElement.firstChild&&t.xAxisGroupElement.removeChild(t.xAxisGroupElement.firstChild),t.config.xAxisGridColumnsSelectable&&t.xAxisGridColumnsSelectableGroupElement.firstChild&&t.xAxisGridColumnsSelectableGroupElement.firstChild.remove(),t.xAxisLabelsGroupElement.firstChild&&t.xAxisLabelsGroupElement.removeChild(t.xAxisLabelsGroupElement.firstChild);const s=t.config.xAxisGridColumns?t.chartWidth/t.data.xAxis.columns.length:t.chartWidth/(t.data.xAxis.columns.length-1);t.columnWidth=s,i.addXAxisGridAndLabels(s)}function E(t,i){t.lineAndBarSelectedColumnIndex=null,t.lineAndBarValueHeight=t.chartHeight/(Math.abs(t.config.minValue)+t.config.maxValue),t.barCountPerColumn=t.config.barStacked?1:0,t.config.yAxisGrid&&i.addYAxisGridAndLabels(),t.config.xAxisTitle&&i.addXAxisTitle(),t.config.yAxisTitle&&i.addYAxisTitle(),t.config.xAxisLabels&&i.addXAxisLabelsGroup(),t.xAxisGroupElement=t.svg.appendChild(a("g",{className:r("x-axis-group")}))}x=new WeakMap,m=new WeakMap,p=new WeakSet,C=function(t,i){t.appendChild(a("line",{x1:i,y1:this.config.padding.top,x2:i,y2:this.svgChart.chartHeight+this.config.padding.top+2*this.config.yAxisGridPadding,className:r("x-axis-grid-line"),stroke:this.config.xAxisGridLineColor||"",strokeWidth:this.config.xAxisGridLineWidth||"",strokeDasharray:this.config.xAxisGridLineDashArray||""}))},v=function(t){w(this,p,"m",b).call(this,t.target)},b=function(t){for(var i=this.svgChart.xAxisLabelsGroupElement.querySelectorAll("text."+r("x-axis-grid-column-selectable-label")),e=this.svgChart.xAxisGridColumnsSelectableGroupElement.querySelectorAll("rect."+r("x-axis-grid-column-selectable")),s=0;s<i.length;s++)i[s]===t?(this.svgChart.lineAndBarSelectedColumnIndex=s,i[s].classList.add(r("selected")),e[s].classList.add(r("selected")),e[s].setAttribute("fill-opacity",this.config.xAxisGridSelectedColumnOpacity.toString()),this.config.onXAxisLabelGroupSelect&&this.config.onXAxisLabelGroupSelect(this.svgChart,this.svgChart.lineAndBarSelectedColumnIndex)):(i[s].classList.remove(r("selected")),e[s].classList.remove(r("selected")),e[s].setAttribute("fill-opacity","0"))},A=function(t){"Enter"===t.key&&w(this,p,"m",b).call(this,t.target)};var L,T,k,P,B,W=function(t,i,e,s){if("a"===e&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)};class D extends c{constructor(t){super(t),L.add(this),T.set(this,void 0),function(t,i,e,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?n.call(t,e):n?n.value=e:i.set(t,e)}(this,T,new S(t),"f")}onDrawSerie(t,i,e){var s=[[]],n=[];const o=Math.abs(this.config.minValue);h(this,this.svgChart.data.series[t.id],this.config.ltr,((t,i,e)=>{var a=this.config.padding.left+this.config.xAxisGridPadding+i*this.svgChart.columnWidth+(this.config.xAxisGridColumns?this.svgChart.columnWidth/2:0),r=this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight-(t+o)*this.svgChart.lineAndBarValueHeight;null===t?s[s.length-1].length>0&&i+1<e.length&&s.push([]):(s[s.length-1].push({x:a,y:r,value:t}),n.push({x:a,y:r,value:t}))}));var l=[];if(this.config.connectNullValues){let t=this.config.lineCurved?W(this,L,"m",k).call(this,n):W(this,L,"m",B).call(this,n);t.length>0&&l.push(t)}else s.forEach((t=>{if(t.length>0){let i=this.config.lineCurved?W(this,L,"m",k).call(this,t):W(this,L,"m",B).call(this,t);i.length>0&&l.push(i)}}));l.forEach((s=>{e.appendChild(a("path",{d:s.join(" "),fill:this.config.lineChartFilled?this.svgChart.getSerieFill(t,i):"none",fillOpacity:.4,stroke:this.svgChart.getSerieStrokeColor(t,i),strokeWidth:this.config.lineWidth||"",className:r("line")}))})),this.config.points&&n.forEach((s=>{e.appendChild(a("circle",{cx:s.x,cy:s.y,r:this.config.pointRadius,zIndex:1,fill:this.svgChart.getSeriePointColor(t,i),stroke:this.svgChart.getSeriePointColor(t,i),dataValue:s.value,className:r("line-point"),tabindex:this.config.focusedValueShow?0:null}))}))}onDrawStart(t){G(this.svgChart,W(this,T,"f"))}onConfigBefore(){super.onConfigBefore(),E(this.svgChart,W(this,T,"f"))}}T=new WeakMap,L=new WeakSet,k=function(t){let i=["M "+t[0].x+" "+t[0].y];for(var e=0;e<t.length-1;e++){var s=(t[e].x+t[e+1].x)/2,n=(t[e].y+t[e+1].y)/2,a=(s+t[e].x)/2,o=(s+t[e+1].x)/2;i.push(`Q ${a} ${t[e].y}, ${s} ${n}`),i.push(`Q ${o} ${t[e+1].y} ${t[e+1].x} ${t[e+1].y}`)}return W(this,L,"m",P).call(this,i,t),i},P=function(t,i){this.config.lineChartFilled&&i.length>1&&(t.push(`L ${i[i.length-1].x} ${this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight}`),t.push(`L ${i[0].x} ${this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight}`),t.push(`L ${i[0].x} ${i[0].y}`),t.push("Z"))},B=function(t){let i=[];return t.forEach(((t,e)=>{0===e?i.push(`M ${t.x} ${t.y}`):i.push(`L ${t.x} ${t.y}`)})),W(this,L,"m",P).call(this,i,t),i};var F,V=function(t,i,e,s){if("a"===e&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)};class N extends c{constructor(t){super(t),F.set(this,void 0),function(t,i,e,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?n.call(t,e):n?n.value=e:i.set(t,e)}(this,F,new S(t),"f")}onDrawSerie(t,i,e){h(this,this.svgChart.data.series[t.id],this.config.ltr,((s,n)=>{var o=null,h=null,l=null;this.config.barStacked?(this.stackedBarValues[n]||(this.stackedBarValues[n]=this.config.minValue),o=this.config.padding.left+this.config.xAxisGridPadding+n*this.svgChart.columnWidth+this.config.barSpacing,h=this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight-s*this.svgChart.lineAndBarValueHeight-this.stackedBarValues[n]*this.svgChart.lineAndBarValueHeight,l=this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight-s*this.svgChart.lineAndBarValueHeight,this.stackedBarValues[n]=this.stackedBarValues[n]+=s):(o=this.config.padding.left+this.config.xAxisGridPadding+n*this.svgChart.columnWidth+this.barWidth*this.currentBarIndex+this.config.barSpacing*(this.currentBarIndex+1),isNaN(o)&&console.log(this.currentBarIndex),l=h=this.config.padding.top+this.config.yAxisGridPadding+this.svgChart.chartHeight-s*this.svgChart.lineAndBarValueHeight),e.appendChild(a("rect",{x:o,y:h,width:this.barWidth,height:this.svgChart.chartHeight+this.config.padding.top+this.config.yAxisGridPadding-l,fill:this.svgChart.getSerieFill(t,i),className:r("bar"),fillOpacity:this.config.barFillOpacity||"",strokeWidth:this.config.barStrokeWidth||0,stroke:this.svgChart.getSerieStrokeColor(t,i),dataValue:s,tabindex:this.config.focusedValueShow?0:null}))})),this.currentBarIndex+=1}onDrawStart(t){G(this.svgChart,V(this,F,"f"));const i=(this.svgChart.columnWidth-this.config.barSpacing*(this.svgChart.barCountPerColumn+1))/(this.svgChart.barCountPerColumn||1);this.barWidth=i,this.currentBarIndex=0,this.stackedBarValues={}}onConfigBefore(){super.onConfigBefore(),E(this.svgChart,V(this,F,"f"))}onConfigSerieBefore(t){super.onConfigSerieBefore(t),this.config.barStacked||t.type!==g.Bar&&this.config.chartType!==g.Bar||(this.svgChart.barCountPerColumn+=1)}}F=new WeakMap,N.requiredConfigWithValue={xAxisGridColumns:!0};var M,O,H=function(t,i,e,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},j=function(t,i,e,s){if("a"===e&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)};class $ extends c{constructor(t){super(t),M.set(this,void 0),O.set(this,void 0),H(this,O,new N(t),"f"),H(this,M,new D(t),"f")}onDrawSerie(t,i,e){switch(t.type||(this.config.chartType===g.LineAndBar?g.Line:this.config.chartType)){case g.Line:j(this,M,"f").onDrawSerie(t,i,e);break;case g.Bar:j(this,O,"f").onDrawSerie(t,i,e)}}onDrawStart(t){j(this,O,"f").onDrawStart(t)}onConfigBefore(){j(this,O,"f").onConfigBefore()}onConfigSerieBefore(t){j(this,O,"f").onConfigSerieBefore(t)}}function z(t,i,e){var s=t.chartHeight/2,n=t.width/2,o=t.chartHeight/2+t.config.padding.top,h=0;for(let i in t.data.series)h+=t.data.series[i];var l=360/h,d=0;t.config.series.forEach(((h,c)=>{var f=a("g",{dataSerie:h.id,className:t.unselectedSeries[h.id]?r("unselected"):""});const u=t.data.series[h.id];var p=e(n,o,s,d*l,(d+=u)*l);f.appendChild(a("path",{d:p.join(" "),fill:t.getSerieFill(h,c),fillOpacity:t.config.pieFillOpacity||1,className:r("pie-piece"),tabindex:0,stroke:t.config[g[t.config.chartType].toLowerCase()+"Stroke"],strokeWidth:t.config[g[t.config.chartType].toLowerCase()+"StrokeWidth"],dataValue:u})),i.appendChild(f)}))}M=new WeakMap,O=new WeakMap,$.requiredConfigWithValue={xAxisGridColumns:!0};var R,I,X,q,Y,U,Z,Q,_,J,K,tt,it,et,st,nt,at,ot,rt,ht,lt,dt,ct,gt,ft,ut=function(t,i,e,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},pt=function(t,i,e,s){if("a"===e&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)};class xt{static setActiveColorPalette(t){ut(xt,I,t,"f",Y)}constructor(t,i){if(R.add(this),U.set(this,void 0),Z.set(this,void 0),Q.set(this,void 0),_.set(this,null),J.set(this,null),K.set(this,null),tt.set(this,null),it.set(this,null),et.set(this,void 0),!pt(xt,I,"f",q)){ut(xt,I,!0,"f",q);const i=["."+r("line-point")+", g."+r("legend-group")+" g, ."+r("x-axis-grid-column-selectable-label")+" { cursor: pointer; }","."+r("line-point")+":hover, circle."+r("line-point")+":focus { stroke-width: 6; outline: none; }","#"+r("serie-group")+" g { transition: opacity 0.6s; }","#"+r("serie-group")+" g."+r("unselected")+" { opacity: 0; }","#"+r("serie-group-current")+" { transition: opacity 1s; opacity: 1; }","#"+r("serie-group-current")+"."+r("unattached")+" { opacity: 0; }","g."+r("legend-group")+" g."+r("unselected")+" { opacity: 0.4; }","text."+r("x-axis-label")+"."+r("x-axis-grid-column-selectable-label")+"."+r("selected")+" { font-weight: bold; }","rect."+r("bar")+":hover, path."+r("pie-piece")+":hover { fill-opacity: 0.7; }","path."+r("pie-piece")+":focus, rect."+r("bar")+":focus { outline: none; fill-opacity:1; }"];t.ownerDocument.head.appendChild(document.createElement("style")).innerHTML=i.join("\n")}const e=t.getBoundingClientRect();this.width=e.width,this.height=e.height,this.svg=a("svg",{width:this.width,height:this.height}),t.appendChild(this.svg),this.setConfig(i)}setConfig(t){const i=new u;for(this.config=Object.assign({},i,t),this.config.padding=Object.assign({},i.padding,this.config.padding),this.config=Object.assign(this.config,pt(xt,I,"f",X)[this.config.chartType].requiredConfigWithValue),this.config.ltr?(this.config.padding.left=this.config.padding.start,this.config.padding.right=this.config.padding.end):(this.config.padding.left=this.config.padding.end,this.config.padding.right=this.config.padding.start),this.controller=new(pt(xt,I,"f",X)[t.chartType])(this),this.svg.setAttribute("direction",u.getDirection(this.config)),pt(this,et,"f")&&pt(this,et,"f").length&&pt(this,et,"f").forEach((t=>{t.node.removeEventListener(t.eventName,t.callback,t.capture)})),ut(this,et,[],"f");this.svg.childNodes.length;)this.svg.firstChild.remove();this.data=null,this.unselectedSeries={},this.chartWidth=this.width-this.config.padding.start-this.config.padding.end-2*this.config.xAxisGridPadding,this.chartHeight=this.height-this.config.padding.top-this.config.padding.bottom-2*this.config.yAxisGridPadding,this.config.backgroundColor&&(this.svg.style.backgroundColor=this.config.backgroundColor),ut(this,U,a("defs"),"f"),this.svg.appendChild(pt(this,U,"f")),pt(this,K,"f")||ut(this,K,pt(this,R,"m",ct).bind(this),"f"),this.config.drawOnConfig&&(ut(this,Z,a("g",{className:r("draw-on-config-group")}),"f"),this.svg.appendChild(pt(this,Z,"f"))),this.config.title&&pt(this,R,"m",at).call(this),this.config.legend&&pt(this,R,"m",nt).call(this),this.controller.onConfigBefore(),this.config.series.forEach((t=>{if(this.controller.onConfigSerieBefore(t),t.fillGradient){var i=a("linearGradient",{id:t.id+"-gradient",x1:0,x2:0,y1:0,y2:1});i.appendChild(a("stop",{offset:"0%",stopColor:t.fillGradient[0]})),i.appendChild(a("stop",{offset:"100%",stopColor:t.fillGradient[1]})),pt(this,U,"f").appendChild(i)}this.controller.onConfigSerieAfter(t)})),this.config.drawOnConfig&&this.config.drawOnConfig(this,pt(this,Z,"f")),this.config.drawOnData&&(ut(this,Q,a("g",{className:r("draw-on-data-group")}),"f"),this.svg.appendChild(pt(this,Q,"f"))),pt(this,R,"m",st).call(this),this.controller.onConfigAfter()}chart(t=null){null!==t&&(this.data=t);const i=pt(this,R,"m",ot).call(this);this.controller.onDraw(i),pt(this,R,"m",rt).call(this,i),this.config.drawOnData&&this.config.drawOnData(this,pt(this,Q,"f"))}saveAsPng(t){var i=this.svg.getBoundingClientRect(),e=document.createElement("canvas");e.setAttribute("width",i.width.toString()),e.setAttribute("height",i.height.toString());var s=e.getContext("2d");s.fillStyle=this.svg.style.backgroundColor,s.clearRect(0,0,e.width,e.height),s.fillRect(0,0,e.width,e.height);var n=new Image,a='<svg xmlns="http://www.w3.org/2000/svg">'+this.svg.innerHTML+"</svg>",o=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("svg")[0];o.setAttribute("width",i.width.toString()),o.setAttribute("height",i.height.toString());var r="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(o));n.onload=function(){s.drawImage(n,0,0,i.width,i.height),window.URL.revokeObjectURL(r);var a=e.toDataURL("image/png");const o=document.createElement("a");o.href=a,o.download=t,o.click(),o.remove()},n.src=r}getSeriePropertyColor(t,i,e){for(var s=0;s<t.length;s++){var n=t[s];if(i[n])return"fillGradient"===n?`url(#${i.id}-gradient)`:i[n]}return i.color?i.color:pt(xt,I,"f",Y)[e]}getSeriePointColor(t,i){return this.getSeriePropertyColor(["pointColor","strokeColor"],t,i)}getSerieStrokeColor(t,i){return this.getSeriePropertyColor(["strokeColor"],t,i)}getSerieFill(t,i){return this.getSeriePropertyColor(["fillGradient"],t,i)}addEventListener(t,i,e,s){t.addEventListener(i,e,s),pt(this,et,"f").push({node:t,eventName:i,callback:e,capture:s})}}return I=xt,U=new WeakMap,Z=new WeakMap,Q=new WeakMap,_=new WeakMap,J=new WeakMap,K=new WeakMap,tt=new WeakMap,it=new WeakMap,et=new WeakMap,R=new WeakSet,st=function(){this.serieGroupElement=a("g",{id:r("serie-group")}),this.svg.appendChild(this.serieGroupElement),this.addEventListener(this.serieGroupElement,"transitionend",pt(this,K,"f"),!1),this.config.focusedValueShow&&(pt(this,tt,"f")||(ut(this,tt,pt(this,R,"m",ft).bind(this),"f"),ut(this,it,pt(this,R,"m",gt).bind(this),"f")),this.addEventListener(this.serieGroupElement,"focus",pt(this,tt,"f"),!0),this.addEventListener(this.serieGroupElement,"blur",pt(this,it,"f"),!0),this.valueElGroup=a("g",{className:r("value-element-group")}),this.valueElRect=a("rect",{fill:this.config.focusedValueFill||"black"}),this.valueElText=a("text",{direction:u.getDirection(this.config),textAnchor:"middle",dominantBaseline:"middle",fontFamily:this.config.fontFamily,fontSize:"smaller",fill:this.config.focusedValueColor||"white"},document.createTextNode("")),this.valueElGroup.appendChild(this.valueElRect),this.valueElGroup.appendChild(this.valueElText))},nt=function(){const t=a("g",{className:r("legend-group")});if(this.config.legendSelect&&(pt(this,_,"f")||(ut(this,_,pt(this,R,"m",dt).bind(this),"f"),ut(this,J,pt(this,R,"m",lt).bind(this),"f")),this.addEventListener(t,"keydown",pt(this,J,"f"),!1),this.addEventListener(t,"click",pt(this,_,"f"),!1)),this.config.series.forEach(((i,e)=>{const s=a("g",{dataSerie:i.id,tabindex:this.config.legendSelect?0:null});let n=0,o=0;switch(this.config.legendPosition){case f.Top:o=this.config.legendTop?this.config.legendTop:this.config.padding.top/2;break;case f.Bottom:o=this.config.legendBottom?this.config.legendBottom:this.height-this.config.padding.bottom/2;break;case f.End:this.config.ltr?(n=this.config.padding.start+this.chartWidth+2*this.config.xAxisGridPadding+this.config.paddingDefault,o=this.config.padding.top+this.config.yAxisGridPadding+e*this.config.paddingDefault):(n=2*this.config.xAxisGridPadding+this.config.padding.end-this.config.paddingDefault-this.config.legendWidth,o=this.config.padding.top+this.config.yAxisGridPadding+e*this.config.paddingDefault)}const r=a("rect",{x:n,y:o,rx:this.config.legendCircle?this.config.legendWidth:0,ry:this.config.legendCircle?this.config.legendWidth:0,width:this.config.legendWidth,height:this.config.legendWidth,fill:this.getSerieFill(i,e)}),h=a("text",{direction:u.getDirection(this.config),x:this.config.ltr?n+2*this.config.legendWidth:n-this.config.legendWidth,y:o+this.config.legendWidth/2+1,textAnchor:"start",dominantBaseline:"middle",fontFamily:this.config.fontFamily,fill:this.config.legendColor,fontSize:this.config.legendFontSize},document.createTextNode(i.title));this.config.ltr?(s.appendChild(r),s.appendChild(h)):(s.appendChild(h),s.appendChild(r)),t.appendChild(s)})),this.svg.appendChild(t),[f.Top,f.Bottom].indexOf(this.config.legendPosition)>-1){let i=0,e=this.config.ltr?0:this.width-this.config.legendWidth;t.querySelectorAll("g").forEach((t=>{const s=t.getBBox();t.querySelector("rect").setAttribute("x",e.toString()),t.querySelector("text").setAttribute("x",(this.config.ltr?e+2*this.config.legendWidth:e-10).toString()),this.config.ltr?e+=s.width+this.config.paddingDefault:e-=s.width+this.config.paddingDefault,i+=s.width+this.config.paddingDefault})),this.config.ltr?(e-=this.config.paddingDefault,t.setAttribute("transform","translate("+(this.width/2-e/2)+", 0)")):(i-=this.config.paddingDefault,t.setAttribute("transform","translate(-"+(this.width/2-i/2)+", 0)"))}},at=function(){var t,i,e=null;switch(this.config.titleHorizontalPosition){case f.End:t=this.width-this.config.paddingDefault,e=this.config.ltr?"end":"start";break;case f.Start:t=this.config.paddingDefault,e=this.config.ltr?"start":"end";break;default:t=this.width/2,e="middle"}switch(this.config.titleVerticalPosition){case f.Center:this.height,i="middle";break;case f.Bottom:this.height,this.config.paddingDefault,i="auto";break;default:this.config.paddingDefault,i="hanging"}this.svg.appendChild(a("text",{direction:u.getDirection(this.config),x:t,y:this.config.paddingDefault,textAnchor:e,dominantBaseline:i,fontFamily:this.config.fontFamily,fontSize:this.config.titleFontSize,fill:this.config.titleColor,className:r("text-title")},document.createTextNode(this.config.title)))},ot=function(){return this.serieGroupElement.firstChild&&this.serieGroupElement.firstChild.remove(),a("g",{id:r("serie-group-current"),className:this.config.transition?r("unattached"):""})},rt=function(t){this.serieGroupElement.appendChild(t).getBoundingClientRect(),this.config.transition&&t.classList.remove(r("unattached"))},ht=function(t){var i=o(t,"g");if(i&&i.dataset.serie){var e=this.serieGroupElement.querySelector('g[data-serie="'+i.dataset.serie+'"]');this.unselectedSeries[i.dataset.serie]?(e&&(e.setAttribute("display","inline"),e.classList.remove(r("unselected"))),i.classList.remove(r("unselected")),delete this.unselectedSeries[i.dataset.serie]):(i.classList.add(r("unselected")),e&&e.classList.add(r("unselected")),this.unselectedSeries[i.dataset.serie]=!0)}},lt=function(t){"Enter"===t.key&&pt(this,R,"m",ht).call(this,t.target)},dt=function(t){pt(this,R,"m",ht).call(this,t.target)},ct=function(t){const i=t.target;i.classList.contains(r("unselected"))&&i.setAttribute("display","none")},gt=function(t){o(t.target,"g").dataset.serie&&this.serieGroupElement.removeChild(this.valueElGroup)},ft=function(t){var i=t.target,e=o(i,"g").dataset.serie;if(e){var s=this.config.series.find((t=>t.id===e));this.valueElText.replaceChild(document.createTextNode(s.title+": "+i.dataset.value),this.valueElText.firstChild),this.serieGroupElement.appendChild(this.valueElGroup);var n=this.valueElText.getBBox(),a=n.width+2*this.config.focusedValuePadding,r=n.height+2*this.config.focusedValuePadding;this.valueElRect.setAttribute("width",a.toString()),this.valueElRect.setAttribute("height",r.toString()),this.valueElText.setAttribute("x",(a/2).toString()),this.valueElText.setAttribute("y",(r/2).toString());let t,o=null;switch(s.type||this.config.chartType){case g.Line:case g.Bar:case g.LineAndBar:t=(parseFloat(i.getAttribute("cx"))||parseFloat(i.getAttribute("x"))+parseFloat(i.getAttribute("width"))/2)-a/2,o=(parseFloat(i.getAttribute("cy"))||parseFloat(i.getAttribute("y")))-10-r;break;case g.Pie:case g.Donut:var h=i.getAttribute("d").split(" ");t=parseFloat(h[1].trim()),o=parseFloat(h[2].trim())}this.valueElGroup.setAttribute("transform","translate("+t+", "+o+")")}},pt(xt,I,"f",X={value:{ChartType:c}})[g.Line]=D,pt(xt,I,"f",X)[g.Bar]=N,pt(xt,I,"f",X)[g.LineAndBar]=$,pt(xt,I,"f",X)[g.Pie]=class extends c{onDraw(t){z(this.svgChart,t,((t,i,e,s,n)=>function(t,i,e,s,n){var a=l(t,i,e,n),o=l(t,i,e,s),r=n-s<=180?"0":"1";return["M",a.x,a.y,"A",e,e,0,r,0,o.x,o.y,"L",t,i,"L",a.x,a.y]}(t,i,e,s,n)))}},pt(xt,I,"f",X)[g.Donut]=class extends c{onDraw(t){const i=this.config.donutWidth||this.svgChart.chartHeight/4;z(this.svgChart,t,((t,e,s,n,a)=>function(t,i,e,s,n,a){var o=l(t,i,e,a),r=l(t,i,e,n),h=l(t,i,e+s,a),d=l(t,i,e+s,n),c=a-n<=180?"0":"1";return["M",h.x,h.y,"A",e+s,e+s,0,c,0,d.x,d.y,"L",r.x,r.y,"A",e,e,0,c,1,o.x,o.y,"L",h.x,h.y,"Z"]}(t,e,s-i,i,n,a)))}},xt.colorPalettes=d,q={value:!1},Y={value:d.dutchFieldColorPalette},i})()));