<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: bar_and_line_utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: bar_and_line_utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module
 * @ignore
 */

import { AxisController } from "./axis.js";
import { SvgChart } from "./svg.js";
import { el, prefixed } from "./utils.js";

/**
     * Do things at the start of the draw for this chart.
     * @param {SvgChart} svgChart SvgChart instance.
     * @param {AxisController} axisController AxisController instance.
     * @param {HTMLElement} currentSerieGroupElement DOM group element.
     */
function drawStart(svgChart, axisController, currentSerieGroupElement) {
    if (svgChart.xAxisGroupElement.firstChild) {
        svgChart.xAxisGroupElement.removeChild(svgChart.xAxisGroupElement.firstChild);
    }

    if (svgChart.config.xAxisGridColumnsSelectable) {
        if (svgChart.xAxisGridColumnsSelectableGroupElement.firstChild) {
            svgChart.xAxisGridColumnsSelectableGroupElement.firstChild.remove();
        }
    }

    if (svgChart.xAxisLabelsGroupElement.firstChild) {
        svgChart.xAxisLabelsGroupElement.removeChild(svgChart.xAxisLabelsGroupElement.firstChild);
    }

    // Note that for bar charts to display correctly, this.config.xAxisGridColumns MUST be true!
    const columnWidth = svgChart.config.xAxisGridColumns
        ? (svgChart.chartWidth / (svgChart.data.xAxis.columns.length))
        : (svgChart.chartWidth / (svgChart.data.xAxis.columns.length - 1));
    
    svgChart.columnWidth = columnWidth;
    
    axisController.addXAxisLabels(columnWidth);
}

/**
 * Execute config things before global config things are done, like adding the axis lines and labels.
 * @param {SvgChart} svgChart SvgChart instance.
 * @param {AxisController} axisController AxisController instance.
 */
function configBefore(svgChart, axisController) {

    svgChart.lineAndBarSelectedColumnIndex = null;
    svgChart.lineAndBarValueHeight = svgChart.chartHeight / svgChart.config.maxValue;
    svgChart.barCountPerColumn = svgChart.config.barStacked ? 1 : 0;

    if (svgChart.config.yAxisGrid) {
        axisController.addYAxisGrid();
    }

    if (svgChart.config.xAxisTitle) {
        axisController.addXAxisTitle();
    }

    if (svgChart.config.yAxisTitle) {
        axisController.addYAxisTitle();
    }

    if (svgChart.config.xAxisLabels) {
        axisController.addXAxisLabelsGroup();
    }

    svgChart.xAxisGroupElement = svgChart.svg.appendChild(el('g', {
        className: prefixed('x-axis-group')
    }));
}

export { drawStart, configBefore };</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="SvgChart.html">SvgChart</a></li><li><a href="SvgChartConfig.html">SvgChartConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat May 06 2023 14:54:10 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
